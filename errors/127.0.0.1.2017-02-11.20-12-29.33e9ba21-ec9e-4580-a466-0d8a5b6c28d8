(dp1
S'output'
p2
S"<type 'exceptions.TypeError'> 'NoneType' object is not iterable"
p3
sS'layer'
p4
S'/opt/python/web2py-files/web2py/applications/proyect/controllers/especialista.py'
p5
sS'code'
p6
S'# -*- coding: utf-8 -*-\n# this file is released under public domain and you can use without limitations\ndef listado_preguntas():\n    if request.cid:\n        links = []\n        preguntas = []\n\n        links.append({\'header\': T(\'Activo\'), \'body\': lambda row: __activo(row.activo)})\n\n        diagnostico = db.diagnostico_inicial(request.args(0))\n\n        if diagnostico:\n            preguntas = diagnostico.preguntas\n\n        grid = SQLFORM.grid(db.pregunta.id.belongs(preguntas), create=False, paginate=50, deletable=False, details=False, editable=True, links=links, exportclasses=dict(xml=False, html=False, json=False, csv_with_hidden_cols=False, tsv_with_hidden_cols=False, csv=False, tsv=False))\n        response.headers[\'web2py-component-flash\']=T("fasd")\n        return dict(grid=grid)\n    else:\n        raise HTTP(403)\n\ndef listado_cuestionario_diagnostico():\n    if request.cid:\n        \n        grid = SQLFORM.grid(db.diagnostico_inicial)\n\n        response.flash = T("Listado de Diagn\xc3\xb3stico")\n        response.title = T("Listado de Diagn\xc3\xb3stico") + response.title\n\n        return dict(grid=grid)\n    else:\n        raise HTTP(403)\n\ndef __activo(flag):\n    \'\'\'\n    Funci\xc3\xb3n que devuelve un ayudante\n    \'\'\'\n    if flag:\n        return A(XML(\'<i class="glyphicon glyphicon-ok"></i> \'), _class="btn btn-danger", **{\'_data-toggle\': "tooltip", \'_title\': T("Cuestionario diagn\xc3\xb3stico activo"), \'_data-placement\': "right"})\n    else:\n        return A(XML(\'<i class="glyphicon glyphicon-remove"></i> \'), _class="btn btn-info", **{\'_data-toggle\': "tooltip", \'_title\': T("Cuestionario diagn\xc3\xb3stico desactivado"), \'_data-placement\': "right"})\n\n@auth.requires_membership("Especialista")\ndef lista_diagnostico():\n\n    \n    return dict()\n\n@auth.requires_membership("Especialista")\ndef nuevo_diagnostico():\n    response.flash = T("Nuevo Diagn\xc3\xb3stico")\n    response.title = T("Nuevo Diagn\xc3\xb3stico") + response.title\n\n    form = SQLFORM(db.diagnostico_inicial)\n\n    if form.validate():\n        form.vars.id = db.diagnostico_inicial.insert(**dict(form.vars))\n\n        response.flash = T(\'Nuevo cuestionario Diagn\xc3\xb3stico Inicial insertado\')\n\n    elif form.errors:\n        response.flash = T(\'El formulario tiene errores\')\n    else:\n        response.flash = T(\'Por favor complete el formulario\')\n    return dict(form=form)\n\n@auth.requires_membership("Especialista")\ndef asignar_diagnostico():\n    response.flash = T("Asignar Diagn\xc3\xb3stico")\n    response.title = T("Asignar Diagn\xc3\xb3stico") + response.title\n    return dict()\n\nresponse._vars=response._caller(listado_cuestionario_diagnostico)\n'
p7
sS'snapshot'
p8
(dp9
sS'traceback'
p10
S'Traceback (most recent call last):\n  File "/opt/python/web2py-files/web2py/gluon/restricted.py", line 227, in restricted\n    exec ccode in environment\n  File "/opt/python/web2py-files/web2py/applications/proyect/controllers/especialista.py", line 72, in <module>\n  File "/opt/python/web2py-files/web2py/gluon/globals.py", line 417, in <lambda>\n    self._caller = lambda f: f()\n  File "/opt/python/web2py-files/web2py/applications/proyect/controllers/especialista.py", line 24, in listado_cuestionario_diagnostico\n    grid = SQLFORM.grid(db.diagnostico_inicial)\n  File "/opt/python/web2py-files/web2py/gluon/sqlhtml.py", line 2352, in grid\n    next=referrer)\n  File "/opt/python/web2py-files/web2py/gluon/html.py", line 2298, in process\n    self.validate(**kwargs)\n  File "/opt/python/web2py-files/web2py/gluon/html.py", line 2236, in validate\n    if self.accepts(**kwargs):\n  File "/opt/python/web2py-files/web2py/gluon/sqlhtml.py", line 1744, in accepts\n    self.id_field_name]).update(**fields)\n  File "/opt/python/web2py-files/web2py/gluon/packages/dal/pydal/objects.py", line 2054, in update\n    ret = db._adapter.update("%s" % table._tablename, self.query, fields)\n  File "/opt/python/web2py-files/web2py/gluon/packages/dal/pydal/adapters/mongo.py", line 981, in update\n    expanded = MongoDBAdapter.Expanded(self, \'update\', query, fields)\n  File "/opt/python/web2py-files/web2py/gluon/packages/dal/pydal/adapters/mongo.py", line 371, in __init__\n    self._expand_fields(self._fields_loop_abort)\n  File "/opt/python/web2py-files/web2py/gluon/packages/dal/pydal/adapters/mongo.py", line 492, in _expand_fields\n    self._expand_field(field, value, mid_loop)\n  File "/opt/python/web2py-files/web2py/gluon/packages/dal/pydal/adapters/mongo.py", line 503, in _expand_field\n    expanded = self.adapter.expand(value, field.type)\n  File "/opt/python/web2py-files/web2py/gluon/packages/dal/pydal/adapters/mongo.py", line 721, in expand\n    result = self.represent(expression, field_type)\n  File "/opt/python/web2py-files/web2py/gluon/packages/dal/pydal/adapters/mongo.py", line 228, in represent\n    value = [self.object_id(v) for v in obj]\nTypeError: \'NoneType\' object is not iterable\n'
p11
s.